---
type: Post
title: The Gnomes Yearn For The Mines
description: >-
  Since I didn't know what to put in this blog to get it started, I decided to build a gnome themed minigame on my homepage and document it.
---

### The Stack

While I could use some framework or engine that spits out WASM, I decided that would be overkill for the scope of this project.

At the same time writing everything with just plain JavaScript seemed a bit boring.

I decided it could be fun to try integrating a JavaScript game framework like PhaserJS with NextJS. This allows me to create a little miniengine for my minigame using just canvas and JAMstack.

I went with this <a>starter template</a> to kick things off. My goal for now is to create a simple blog homepage and slap a canvas over the entire background.

After bootstrapping the starter and adding a little custom styling I ended up with something like this:

<img src="/images/gamescenehomepagething.png" alt="Homepage" style={{ maxWidth: '100%', height: 'auto' }} />

My blog now has a nice little 2D "skybox" of sorts. I plan on removing background color from my canvas leaving it transparent. This will leave control over the background coloring up to my NextJS dark/light mode instead of in the Phaser canvas.

Phaser comes with a nice "event bus" system if I ever need to control that from the minigame.

### The Canvas

Next up I want to set my canvas to fit my browsers inner size.

It took a little tinkering but these CSS and Phaser config settings seemed to do the trick for me.

```css
canvas {
  position: absolute;
  border: 2px solid red;
  top: 0;
  left: 0;
  z-index: -10;
}
```
```js
import { useEffect } from "react";
import Phaser from "phaser";

const PhaserGame = () => {
  useEffect(() => {
    if (typeof window !== "undefined") {
      const gameWidth = window.innerWidth;
      const gameHeight = window.innerHeight;
      let bgColor = "#e0f4ff";

      var config = {
        type: Phaser.AUTO,
  
        scene: {
          preload: preload,
          create: create,
          update: update,
        },
        scale: {
          mode: Phaser.Scale.ENVELOP,
          autoCenter: Phaser.Scale.CENTER_BOTH,
          width: gameWidth,
          height: gameHeight,
        },
        backgroundColor: bgColor,
        transparent: true,
      };

      const game = new Phaser.Game(config);

      function preload() {
      }

      function create() {
      }

      function update() {
      }

      return () => {
        game.destroy(true);
      };
    }
  }, []);

  return <div id="game-container" className="game-container"></div>;
};

export default PhaserGame;
```

In my CSS I added a red border for debugging purposes. This will help me with visualizing and debugging the transparent canvas. I also added a div with a red border around the PhaserGame component, so you can see where that actually exists.

<img src="/images/gamecanvas.png" alt="Homepage" style={{ maxWidth: '100%', height: 'auto' }} />

I then went and tested some sprite positioning, placing some orbs in the corners of my canvas, as well as some ground.

The weird orbs are also just for a final bit of debugging the canvas size, this time with objects inside the canvas.

<img src="/images/firstsceneobjects.png" alt="Homepage" style={{ maxWidth: '100%', height: 'auto' }} />

Everything looks good, now we can move onto getting a player character 